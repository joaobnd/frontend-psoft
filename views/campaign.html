<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>AJuDE | Crowdfunding</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="crowdfunding, doação, vaquinha">
    <meta name="keywords" content="Uma plataforma de crowdfunding gratuita feita para você!">
    <link rel="stylesheet" href="../styles/campaigns.css">
    <script src="../services/campaignService.js" type="module"></script>
    <script src="../services/manageService.js" type="module"></script>
    <script src="../services/commentService.js" type="module"></script>
    <script src="../services/likeService.js" type="module"></script>
</head>
<body>
    <!-- NAVBAR -->
    <header class="main-header">
        <nav id="navbar">
            <ul id="navbar-ul">
                <li id="inicio-btn">
                    <a href="index.html">inicio</a>
                </li>
                <li id="campaigns-btn"> 
                    <a href="campaigns.html">campanhas</a> 
                </li>
                <li id="register-btn"> 
                    <a href="register.html">criar conta</a>
                </li>
                <li id="login-btn"> 
                    <a href="login.html">login</a>
                </li>
                <li id="create-campaign-btn">
                    <a href="create-campaign.html">lançar campanha</a>
                </li>
                <li id="profile-btn">
                    <a href="profile.html" id="logo-btn">
                        <img src="../styles/img/profile.png" alt="Profile">
                    </a>
                </li>
            </ul>
        </nav>
    </header>
    <div id="aux-div">
        <br>
    </div>

    <!-- CAMPANHA -->
    <section id="campaign-section-header">
        <div id="campaign-header">
            <div>
                <img src="../styles/img/logo.png" height="90px" alt="">
                <h3 id="campaign-title"></h3>
                <div id="campaign-title-div">
                    <p>VALOR ATUAL: R$</p>
                    <p id="current-value"></p>
                    <p> | </p>
                    <p>META R$:</p>
                    <p id="goal"></p>
                    <span id="percent-value"></span>
                </div>
            </div>
        </div>
    </section>

    <!-- DADOS DA CAMPANHA -->
    <section id="container-list">
        <div id="owner-div">
            <a>
                <img src="../styles/img/profile.png" alt="profile logo">
                <p id="owner-fname"></p>
                <p id="owner-lname"></p>
            </a>
        </div>
        <div id="deadline-div">
            <img src="../styles/img/calendar.png" height="60px" alt="calender logo">
            <p>ENCERRA EM:</p>
            <span id="campaign-deadline"></span>
        </div>
        <div id="status-div">
            <img src="../styles/img/status.png" height="58px" alt="">
            <p>STATUS</p>
            <span id="campaign-status"></span>
        </div>
        <div id="description-div">
            <p id="campaign-description"></p>
        </div>
    </section>

    <!-- AUX -->
    <div id="aux-div-2">
        <br>
    </div>

    <!-- GERENCIAMENTO DE CAMPANHA -->
    <div id="manage-container">
        <a id="manage-btn">
            <span>Gerencie sua campanha</span>
            <img src="../styles/img/edit.png" height="25px" alt="">
        </a>
    </div>

    <!-- MODAL DE EDIÇÃO -->
    <section id="edit-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span id="closeBtn">&times;</span>
                <h4>Alterar dados da campanha</h4>
            </div>
            <div class="modal-body">
                <form>
                    <label>Descrição</label>
                    <textarea id="campaign-update-description" cols="58" rows="8" maxlength="400" required></textarea>
                    <button id="update-description-btn">Alterar descrição</button>

                    <label>Meta de arrecadação (R$)</label>
                    <input type="number" min="1" id="campaign-update-goal" required>
                    <button id="update-goal-btn">Alterar meta</button>

                    <label>Encerra em</label>
                    <select id="campaign-deadline-day" required>
                        <option value="01">1</option>
                        <option value="02">2</option>
                        <option value="03">3</option>
                        <option value="04">4</option>
                        <option value="05">5</option>
                        <option value="06">6</option>
                        <option value="07">7</option>
                        <option value="08">8</option>
                        <option value="09">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select id="campaign-deadline-month" required>
                        <option value="Janeiro">Janeiro</option>
                        <option value="Fevereiro">Fevereiro</option>
                        <option value="Março">Março</option>
                        <option value="Abril">Abril</option>
                        <option value="Maio">Maio</option>
                        <option value="Junho">Junho</option>
                        <option value="Julho">Julho</option>
                        <option value="Agosto">Agosto</option>
                        <option value="Setembro">Setembro</option>
                        <option value="Outubro">Outubro</option>
                        <option value="Novembro">Novembro</option>
                        <option value="Dezembro">Dezembro</option>
                    </select>
                    <select id="campaign-deadline-year" required>
                        <option value="2019">2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                    </select>
                    <button id="update-deadline-btn">Alterar deadline</button>
                </form>

            </div>
            <div class="modal-footer">
                <h4>Encerrar campanha</h4>
                <button id="finish-campaign-btn">Encerrar campanha</button>
            </div>
        </div>
    </section>

    <!-- INTERAÇÃO -->
    <section id="react-container">
        <!-- LIKES -->
        <div id="likes-div">
            <a id="like-btn"><img src="../styles/img/like.png" height="30px"></a>
            <a id="like-btn-hover"><img src="../styles/img/like-hover.png" height="30px"></a>
            <p id="likes-count"></p>
            
            <a id="dislike-btn"><img src="../styles/img/dislike.png" height="30px"></a>
            <a id="dislike-btn-hover"><img src="../styles/img/dislike-hover.png" height="30px"></a>
            <p id="dislikes-count"></p>
        </div>

        <!-- COMENTÁRIOS -->
        <div id="add-comment-div">
            <form id="comment-form">
                <label>Adicionar comentário</label>
                <textarea id="comment-area" cols="50" rows="4" maxlength="254"></textarea>
                <button id="send-comment">Enviar</button>
            </form>
        </div>

        <div id="comments-div">
            <h2>Comentários</h2>

            <div class="comment">
                <div class="comment-unit">
                    <div class="infos-comment"></div>
                    <a class="comment-profile">
                        <p class="comment-username">Gabriel Costa</p>
                    </a>
                    <p class="comment-time">19h27</p>
                    <p class="comment-area">Comentario teste asdhashdjka hsgdajk hsghask gas hgaj shvhj dvaskjh vhsa </p>
                </div>

                <button class="reply-btn">Responder</button>
            </div>
    
        </div>
    </section>

    <!-- RODAPÉ -->
    <footer class="center-footer" style="position: static;">
        <div class="sub-footer">
            <div id="text-footer">
                <span class="">
                    <p>Copyright © 2019 AJuDE, Inc.</p>
                </span>
            </div>
        </div>
    </footer>
    <script>
        let $modal = document.querySelector('#edit-modal');
        let $open_btn = document.querySelector('#manage-btn');
        let $close_btn = document.querySelector('#closeBtn')

        $open_btn.addEventListener('click', openModal);
        $close_btn.addEventListener('click', closeModal);
        window.addEventListener('click', clickOutside);

        function openModal() {
            $modal.style.display = 'block';
        };

        function closeModal() {
            $modal.style.display = 'none';
        };

        function clickOutside(e) {
            if (e.target == $modal) {
                $modal.style.display = 'none';
            };
        };

        hideContent();
        /**
         * Exclui os botões de criar conta e login e cria o de perfil quando o usuário está logado
         */
        function hideContent() {
            let $login = document.querySelector("#login-btn");
            let $register = document.querySelector("#register-btn");
            let $profile = document.querySelector("#profile-btn");

            // Usuário está logado
            if (localStorage.getItem("token") != null) {
                $login.style.display = "none";
                $register.style.display = "none";
                $profile.style.display = "block";
            }  
            else {
                $profile.style.display = "none";
                $login.style.display = "block"
                $register.style.display = "block"
            };
        };
    </script>
</body>
</html>