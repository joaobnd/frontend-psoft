<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>AJuDE | Crowdfunding</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="crowdfunding, doação, vaquinha">
    <meta name="keywords" content="Uma plataforma de crowdfunding gratuita feita para você!">
    <link rel="stylesheet" href="../styles/campaigns.css">
    <script src="../services/campaignService.js" type="module"></script>
</head>
<body>
    <!-- NAVBAR -->
    <header class="main-header">
        <nav id="navbar">
            <ul id="navbar-ul">
                <li id="inicio-btn">
                    <a href="index.html">inicio</a>
                </li>
                <li id="campaigns-btn"> 
                    <a href="campaigns.html">campanhas</a> 
                </li>
                <li id="register-btn"> 
                    <a href="register.html">criar conta</a>
                </li>
                <li id="login-btn"> 
                    <a href="login.html">login</a>
                </li>
                <li id="create-campaign-btn">
                    <a href="create-campaign.html">lançar campanha</a>
                </li>
                <li id="profile-btn">
                    <a href="profile.html" id="logo-btn">
                        <img src="../styles/img/profile.png" alt="Profile">
                    </a>
                </li>
            </ul>
        </nav>
    </header>
    <div id="aux-div">
        <br>
    </div>

    <!-- CAMPANHA -->
    <section id="campaign-section-header">
        <div id="campaign-header">
            <div>
                <img src="../styles/img/logo.png" height="90px" alt="">
                <h3 id="campaign-title"></h3>
                <div id="campaign-title-div">
                    <p>VALOR ATUAL: R$</p>
                    <p id="current-value"></p>
                    <p> | </p>
                    <p>META R$:</p>
                    <p id="goal"></p>
                    <span id="percent-value"></span>
                </div>
            </div>
        </div>
    </section>

    <!-- DADOS DA CAMPANHA -->
    <section id="container-list">
        <div id="owner-div">
            <a>
                <img src="../styles/img/profile.png" alt="profile logo">
                <p id="owner-fname"></p>
                <p id="owner-lname"></p>
            </a>
        </div>
        <div id="deadline-div">
            <img src="../styles/img/calendar.png" height="60px" alt="calender logo">
            <p>ENCERRA EM:</p>
            <span id="campaign-deadline"></span>
        </div>
        <div id="status-div">
            <img src="../styles/img/status.png" height="58px" alt="">
            <p>STATUS</p>
            <span id="campaign-status"></span>
        </div>
        <div id="description-div">
            <p id="campaign-description"></p>
        </div>
    </section>

    <!-- AUX -->
    <div id="aux-div-2">
        <br>
    </div>

    <!-- GERENCIAMENTO DE CAMPANHA -->
    <div id="manage-container">
        <a id="manage-btn">
            <span>Gerencie sua campanha</span>
            <img src="../styles/img/edit.png" height="25px" alt="">
        </a>
    </div>

    <!-- MODAL DE EDIÇÃO -->
    <section id="edit-modal" class="modal">
        <div class="modal-content">
            <span id="closeBtn">&times;</span>
            <p>Hello... I'm a model</p>
        </div>
    </section>

    <!-- INTERAÇÃO -->
    <section id="react-container">
        <div id="like-div">

        </div>

        <div id="add-comment-div">

        </div>

        <div id="comments-div">

        </div>
    </section>

    <!-- RODAPÉ -->
    <footer class="center-footer">
        <div class="sub-footer">
            <div id="text-footer">
                <span class="">
                    <p>Copyright © 2019 AJuDE, Inc.</p>
                </span>
            </div>
        </div>
    </footer>
    <script>
        let $modal = document.querySelector('#edit-modal');
        let $open_btn = document.querySelector('#manage-btn');
        let $close_btn = document.querySelector('#closeBtn')

        $open_btn.addEventListener('click', openModal);

        $close_btn.addEventListener('click', closeModal);

        window.addEventListener('click', clickOutside);

        function openModal() {
            $modal.style.display = 'block';
        };

        function closeModal() {
            $modal.style.display = 'none';
        };

        function clickOutside(e) {
            if (e.target == $modal) {
                $modal.style.display = 'none';
            };
        };

        hideContent();
        /**
         * Exclui os botões de criar conta e login e cria o de perfil quando o usuário está logado
         */
        function hideContent() {
            let $login = document.querySelector("#login-btn");
            let $register = document.querySelector("#register-btn");
            let $profile = document.querySelector("#profile-btn");

            // Usuário está logado
            if (localStorage.getItem("token") != null) {
                $login.style.display = "none";
                $register.style.display = "none";
                $profile.style.display = "block";
            }  
            else {
                $profile.style.display = "none";
                $login.style.display = "block"
                $register.style.display = "block"
            };

        };
    </script>
</body>
</html>